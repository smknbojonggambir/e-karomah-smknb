<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard - E-KAROMAH</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --primary: #10b981; --gold: #fbbf24; --bg: #0f172a; --card: #1e293b; --text: #f1f5f9; --border: rgba(255,255,255,0.1); }
        body { margin: 0; font-family: 'Poppins', sans-serif; background: var(--bg); color: var(--text); }
        .layout { display: grid; grid-template-columns: 240px 1fr; min-height: 100vh; }
        aside { background: #020617; padding: 20px; border-right: 1px solid var(--border); }
        .nav-item { padding: 12px; color: #94a3b8; border-radius: 8px; cursor: pointer; margin-bottom: 5px; }
        .nav-item.active { background: rgba(16, 185, 129, 0.15); color: var(--primary); }
        main { padding: 30px; }
        .page { display: none; }
        .page.active { display: block; }
        .card { background: var(--card); padding: 20px; border-radius: 12px; border: 1px solid var(--border); margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid var(--border); font-size: 13px; }
        th { color: #94a3b8; background: rgba(0,0,0,0.2); }
    </style>
</head>
<body>
    <div class="layout">
        <aside>
            <h2 style="color:var(--gold)">ðŸŒ™ ADMIN</h2>
            <div class="nav-item active" onclick="showPage('dash', this)">ðŸ“Š Dashboard</div>
            <div class="nav-item" onclick="showPage('siswa', this)">ðŸ‘¥ Data Siswa</div>
            <div class="nav-item" onclick="showPage('guru', this)">ðŸ‘” Data Pembimbing</div>
        </aside>
        <main>
            <div id="page-dash" class="page active">
                <h1>Overview</h1>
                <div class="card"><canvas id="myChart" height="100"></canvas></div>
            </div>
            <div id="page-siswa" class="page">
                <h1>Data Siswa</h1>
                <div class="card">
                    <table>
                        <thead><tr><th>Username</th><th>Nama Lengkap</th><th>Kelompok</th></tr></thead>
                        <tbody id="listSiswa"></tbody>
                    </table>
                </div>
            </div>
            <div id="page-guru" class="page">
                <h1>Data Pembimbing</h1>
                <div class="card">
                    <table>
                        <thead><tr><th>Username</th><th>Nama Lengkap</th><th>Kelompok</th></tr></thead>
                        <tbody id="listGuru"></tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <script>
        const API = "https://script.google.com/macros/s/AKfycbyHBpOUspomuKZ75MGmMoD0ZYuYxjif5FmGfPb6AoVzGC3fFjUmwD1wOfJKggb0F3cYhQ/exec"; // GANTI DENGAN URL DEPLOY ANDA

        function showPage(id, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById('page-'+id).classList.add('active');
            el.classList.add('active');
        }

        async function loadData() {
            try {
                const res = await fetch(API + "?action=getUsers");
                const data = await res.json();
                
                // Render Siswa
                document.getElementById('listSiswa').innerHTML = data.siswa.map(u => 
                    `<tr><td>${u.Username}</td><td>${u["Nama Lengkap"]}</td><td>${u.Kelompok}</td></tr>`
                ).join('');

                // Render Pembimbing
                document.getElementById('listGuru').innerHTML = data.pembimbing.map(u => 
                    `<tr><td>${u.Username}</td><td>${u["Nama Lengkap"]}</td><td>${u.Kelompok}</td></tr>`
                ).join('');
            } catch(e) { console.error(e); }
        }

        loadData();
    </script>
</body>
</html>
